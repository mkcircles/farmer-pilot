import{Z as F,b as L,u as R,r as t,A as U,B as T,l as z,j as e,F as _,c as O,d as M,T as G}from"./app-e6992d92.js";import{b,a as K,e as Y,A as Z,m as f,t as q,v as D,w as S,x as i,y as H,z as r,F as J}from"./Tracker-4692a53f.js";import{n as Q}from"./numberFormatter-373bc269.js";import{P as V}from"./index-9e14f1ab.js";import{C as W}from"./copy-2a5b34fd.js";import"./Transition-ddbebfc1.js";import"./default-config-939e3be8.js";import"./square-stack-c8547d1b.js";function te(o){var d,P;const A=F(),u=L(),a=R(s=>s.auth.token),{updateAppContextState:j}=t.useContext(U),[x,v]=t.useState(1),[h,g]=t.useState(1),[y,C]=t.useState(1),[I,E]=t.useState(""),[$,k]=t.useState(""),[l,w]=t.useState({}),N=(o==null?void 0:o.biometrics_api_url)||`${T}/farmers/bio`,m=(s=N)=>{j("loading",!0),M.get(s,{headers:{API_KEY:G,Authorization:`Bearer ${a}`}}).then(c=>{var p;let n=(p=c.data)==null?void 0:p.data;console.log("Profiles",n),c!=null&&c.data&&(v(parseInt(n==null?void 0:n.current_page)),E(n==null?void 0:n.prev_page_url),k(n==null?void 0:n.next_page_url),C(n==null?void 0:n.last_page),w(n))}).catch(c=>{console.log(c)}).finally(()=>{j("loading",!1)})},B=z.debounce(m,1e3);return t.useEffect(()=>{m()},[a]),t.useEffect(()=>{h!=x&&g(x)},[x]),t.useEffect(()=>{h!=x&&B(`${N}?page=${h}`)},[h]),e.jsx("div",{className:"w-full h-full py-4",children:((d=l==null?void 0:l.data)==null?void 0:d.length)>0?e.jsxs(b,{className:"bg-white h-full w-full",children:[e.jsxs(K,{justifyContent:"start",className:"space-x-2",children:[e.jsx(Y,{children:"Biometrics"}),e.jsx(Z,{color:"gray",children:Q(parseInt((l==null?void 0:l.total)||0))})]}),e.jsxs(f,{className:"mt-2",children:["Overview of ",(o==null?void 0:o.title)||"Biometrics captured"]}),e.jsxs(q,{className:"mt-6",children:[e.jsx(D,{children:e.jsxs(S,{children:[e.jsx(i,{children:"Farmer ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Enrollment Status"}),e.jsx(i,{children:"Possible Duplicate"}),e.jsx(i,{className:"",children:"BioToken"}),e.jsx(i,{className:"",children:"rID"}),e.jsx(i,{className:"",children:"ConsentID"}),e.jsx(i,{className:"",children:"Reason"}),e.jsx(i,{className:"",children:"Registered On"}),e.jsx(i,{className:"",children:"Subject ID"}),e.jsx(i,{children:"Link"})]})}),e.jsx(H,{children:(P=l==null?void 0:l.data)==null?void 0:P.map(s=>{var n;let c=s==null?void 0:s.farmer_profile;return e.jsxs(S,{children:[e.jsx(r,{children:c==null?void 0:c.farmer_id}),e.jsx(r,{children:(c==null?void 0:c.first_name)+" "+(c==null?void 0:c.last_name)}),e.jsx(r,{children:(s==null?void 0:s.enrollmentStatus)||"-"}),e.jsx(r,{children:s!=null&&s.possible_duplicate?e.jsx("span",{onClick:()=>{u(`${_}/${s==null?void 0:s.possible_duplicate}`)},className:"text-secondary cursor-pointer",children:"Link"}):"No"}),e.jsx(r,{className:"",children:s!=null&&s.hasBiometricToken?"Present":"N/A"}),e.jsx(r,{className:"",children:s!=null&&s.rID?"Present":"N/A"}),e.jsx(r,{className:"",children:s!=null&&s.consentGUID?"Present":"N/A"}),e.jsx(r,{className:"",children:(s==null?void 0:s.reason)||"N/A"}),e.jsx(r,{children:(n=new Date(c==null?void 0:c.created_at))==null?void 0:n.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx(r,{children:s!=null&&s.subjectID?e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{title:"Copy",className:"px-2",children:e.jsx(W,{onClick:()=>{navigator.clipboard.writeText(s==null?void 0:s.subjectID),A(O({message:"Subject ID Copied to Clipboard"}))},className:"w-4 h-4 text-primary cursor-pointer hover:scale-125 "})}),e.jsx("span",{children:"Present"})]}):e.jsx("span",{className:"text-primary",children:"N/A"})}),e.jsx(r,{children:e.jsx(J,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{u(`${_}/${c==null?void 0:c.farmer_id}`)},children:"See details"})})]},c==null?void 0:c.id)})})]}),e.jsx(V,{currentPage:x,moveToPage:h,fetchPage:m,setMoveToPage:g,nextPageUrl:$,prevPageUrl:I,lastPage:y,totalPages:l==null?void 0:l.last_page})]}):e.jsx(b,{className:"flex justify-center items-center border border-dashed p-16 border-gray-300",children:e.jsx(f,{children:"No data"})})})}export{te as default};
