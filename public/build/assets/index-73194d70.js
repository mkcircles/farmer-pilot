import{a0 as F,b as R,u as U,r as o,A as L,B as T,l as z,j as e,c as O,F as p,d as M,Q as Y}from"./app-9bcd812f.js";import{b as _,a as G,e as K,A as Q,m as b,t as q,v as D,w as f,x as i,y as H,z as r,F as J}from"./Tracker-1518c126.js";import{n as V}from"./numberFormatter-373bc269.js";import{P as W}from"./index-53b4aa2b.js";import{C as X}from"./copy-8fd1a274.js";import"./Transition-145f9e67.js";import"./default-config-939e3be8.js";import"./createLucideIcon-445f5e21.js";function re(l){var d,N;const S=F(),A=R(),m=U(s=>s.auth.token),{updateAppContextState:u}=o.useContext(L),[x,v]=o.useState(1),[h,j]=o.useState(1),[y,I]=o.useState(1),[C,E]=o.useState(""),[$,w]=o.useState(""),[n,B]=o.useState({}),g=(l==null?void 0:l.biometrics_api_url)||`${T}/farmers/bio`,a=(s=g)=>{u("loading",!0),M.get(s,{headers:{API_KEY:Y,Authorization:`Bearer ${m}`}}).then(c=>{var P;let t=(P=c.data)==null?void 0:P.data;console.log("Profiles",t),c!=null&&c.data&&(v(parseInt(t==null?void 0:t.current_page)),E(t==null?void 0:t.prev_page_url),w(t==null?void 0:t.next_page_url),I(t==null?void 0:t.last_page),B(t))}).catch(c=>{console.log(c)}).finally(()=>{u("loading",!1)})},k=z.debounce(a,1e3);return o.useEffect(()=>{a()},[m]),o.useEffect(()=>{h!=x&&j(x)},[x]),o.useEffect(()=>{h!=x&&k(`${g}?page=${h}`)},[h]),e.jsx("div",{className:"w-full h-full py-4",children:((d=n==null?void 0:n.data)==null?void 0:d.length)>0?e.jsxs(_,{className:"bg-white h-full w-full",children:[e.jsxs(G,{justifyContent:"start",className:"space-x-2",children:[e.jsx(K,{children:(l==null?void 0:l.title)||"Biometrics"}),e.jsx(Q,{color:"gray",children:V(parseInt((n==null?void 0:n.total)||0))})]}),e.jsxs(b,{className:"mt-2",children:["Overview of ",(l==null?void 0:l.subTitle)||(l==null?void 0:l.title)||"Biometrics captured"]}),e.jsxs(q,{className:"mt-6",children:[e.jsx(D,{children:e.jsxs(f,{children:[e.jsx(i,{children:"Farmer ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Enrollment Status"}),e.jsx(i,{children:"Possible Duplicate"}),e.jsx(i,{className:"",children:"BioToken"}),e.jsx(i,{className:"",children:"rID"}),e.jsx(i,{className:"",children:"ConsentID"}),e.jsx(i,{className:"",children:"Reason"}),e.jsx(i,{className:"",children:"Registered On"}),e.jsx(i,{className:"",children:"Subject ID"}),e.jsx(i,{children:"Link"})]})}),e.jsx(H,{children:(N=n==null?void 0:n.data)==null?void 0:N.map(s=>{var t;let c=s==null?void 0:s.farmer_profile;return e.jsxs(f,{children:[e.jsx(r,{children:c==null?void 0:c.farmer_id}),e.jsx(r,{children:(c==null?void 0:c.first_name)+" "+(c==null?void 0:c.last_name)}),e.jsx(r,{children:(s==null?void 0:s.enrollmentStatus)||"-"}),e.jsx(r,{children:s!=null&&s.possible_duplicate?"Yes":"No"}),e.jsx(r,{className:"",children:s!=null&&s.hasBiometricToken?"Present":"N/A"}),e.jsx(r,{className:"",children:s!=null&&s.rID?"Present":"N/A"}),e.jsx(r,{className:"",children:s!=null&&s.consentGUID?"Present":"N/A"}),e.jsx(r,{className:"",children:(s==null?void 0:s.reason)||"N/A"}),e.jsx(r,{children:(t=new Date(c==null?void 0:c.created_at))==null?void 0:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx(r,{children:s!=null&&s.subjectID?e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{title:"Copy",className:"px-2",children:e.jsx(X,{onClick:()=>{navigator.clipboard.writeText(s==null?void 0:s.subjectID),S(O({message:"Subject ID Copied to Clipboard"}))},className:"w-4 h-4 text-primary cursor-pointer hover:scale-125 "})}),e.jsx("span",{children:"Present"})]}):e.jsx("span",{className:"text-primary",children:"N/A"})}),e.jsx(r,{children:e.jsx(J,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{A(`${p}/${c==null?void 0:c.farmer_id}`)},children:"See details"})})]},c==null?void 0:c.id)})})]}),e.jsx(W,{currentPage:x,moveToPage:h,fetchPage:a,setMoveToPage:j,nextPageUrl:$,prevPageUrl:C,lastPage:y,totalPages:n==null?void 0:n.last_page})]}):e.jsx(_,{className:"flex justify-center items-center border border-dashed p-16 border-gray-300",children:e.jsx(b,{children:"No data"})})})}export{re as default};
