import{v as w,u as B,r as c,A as O,D as r,j as t,b as M,c as K,i as T,M as u,n as G,m as H,G as J,H as W,I as S,J as l,K as Y,L as i,bd as m,W as q,N as Q,B as V,O as X,be as Z}from"./app-ffa37ed4.js";function ss({data_src_url:v,status:E,agent_id:F,subTitle:$,...D}){var _;const b=w(),g=B(s=>s.auth.token),{updateAppContextState:j}=c.useContext(O),[o,y]=c.useState(1),[d,p]=c.useState(1),[z,A]=c.useState(1),[I,L]=c.useState(""),[C,R]=c.useState(""),[a,U]=c.useState({}),P=v||`${V}/agent/farmers/status`,x=(s=P)=>{j("loading",!0),console.log(s),X.post(s,{status:E,agent_id:F},{headers:{API_KEY:Z,Authorization:`Bearer ${g}`}}).then(n=>{var h;let e=(h=n==null?void 0:n.data)==null?void 0:h.data;console.log("Profiles",e),n!=null&&n.data&&(y(parseInt(e==null?void 0:e.current_page)),L(e==null?void 0:e.prev_page_url),R(e==null?void 0:e.next_page_url),A(e==null?void 0:e.last_page),U(e))}).catch(n=>{console.log(n)}).finally(()=>{j("loading",!1)})},k=r.debounce(x,1e3);return c.useEffect(()=>{x()},[g]),c.useEffect(()=>{d!=o&&p(o)},[o]),c.useEffect(()=>{d!=o&&k(`${P}?page=${d}`)},[d]),t.jsx("div",{className:"w-full h-full",children:t.jsxs(M,{className:"bg-white h-full w-full",children:[t.jsxs(K,{justifyContent:"start",className:"space-x-2",children:[t.jsx(T,{children:"Farmers"}),t.jsx(u,{color:"gray",children:G(parseInt((a==null?void 0:a.total)||0))})]}),t.jsx(H,{className:"mt-2",children:$}),t.jsxs(J,{className:"mt-6",children:[t.jsx(W,{children:t.jsxs(S,{children:[t.jsx(l,{children:"Farmer ID"}),t.jsx(l,{children:"Name"}),t.jsx(l,{children:"Phone"}),t.jsx(l,{children:"FPO"}),t.jsx(l,{className:"",children:"District"}),t.jsx(l,{className:"",children:"Registered On"}),t.jsx(l,{className:"",children:"Status"}),t.jsx(l,{children:"Link"})]})}),t.jsx(Y,{children:(_=a==null?void 0:a.data)==null?void 0:_.map(s=>{var n,e,h,N;return t.jsxs(S,{children:[t.jsx(i,{children:s.farmer_id}),t.jsx(i,{children:s.first_name+" "+s.last_name}),t.jsx(i,{children:s.phone_number}),t.jsx(i,{children:s.fpo_name||((n=s==null?void 0:s.fpo)==null?void 0:n.fpo_name)||((h=(e=s==null?void 0:s.agent)==null?void 0:e.fpo)==null?void 0:h.fpo_name)}),t.jsx(i,{className:"",children:s.district}),t.jsx(i,{children:(N=new Date(s==null?void 0:s.created_at))==null?void 0:N.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx(i,{children:s.status==="complete"?t.jsx(u,{className:"capitalize",size:"md",color:"green",children:s==null?void 0:s.status}):(s==null?void 0:s.status)==="pending"?t.jsx(u,{className:"capitalize",size:"md",color:"gray",children:s==null?void 0:s.status}):t.jsx(u,{className:"capitalize",size:"md",color:"red",children:s==null?void 0:s.status})}),t.jsx(i,{children:t.jsx(m,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{b(`${q}/${s==null?void 0:s.farmer_id}`)},children:"See details"})})]},s.id)})})]}),t.jsx(Q,{currentPage:o,moveToPage:d,fetchPage:x,setMoveToPage:p,nextPageUrl:C,prevPageUrl:I,lastPage:z,totalPages:a==null?void 0:a.last_page})]})})}export{ss as default};
