import{b as N,a as y,p as F,r as c,A as C,u as h,R as x,d as p,B as g,j as e,q as b,c as A}from"./app-a6d75f14.js";import{e as S,l as q,o as E}from"./Tracker-b2e231e9.js";import{B as R}from"./index-b486d127.js";import{F as d}from"./index-12aa6801.js";import{F as n}from"./index-1d8ca647.js";import{F as L}from"./index-eb99c0f4.js";import{H as B}from"./home-69780e86.js";import"./Transition-9bfcc4d6.js";import"./default-config-939e3be8.js";import"./tw-merge-fbb83fc6.js";const O=()=>{const f=N(),j=y(),{state:{fpo:s}}=F(),{updateAppContextState:o}=c.useContext(C),u=h(a=>{var i;return(i=a.auth)==null?void 0:i.token}),l=h(a=>{var i;return(i=a.auth)==null?void 0:i.user}),[r,t]=x.useState({first_name:"",last_name:"",email:"",phone_number:"",age:"",gender:"",residence:"",referee_name:"",referee_phone_number:"",designation:"",fpo_id:(s==null?void 0:s.fpo_id)||"",created_by:l.id}),[m,v]=x.useState([]);console.log("LOGGED IN USER : ",l.entity_id);const _=()=>{o("loading",!0),p.post(`${g}/agent/register`,r,{headers:{Authorization:`Bearer ${u}`}}).then(a=>{f(b),j(A({message:"New Agent has been added successfully"}))}).catch(a=>{console.log(a)}).finally(()=>{o("loading",!1)})};return c.useEffect(()=>{s&&t({...r,fpo_id:s==null?void 0:s.fpo_id})},[s]),c.useEffect(()=>{(l==null?void 0:l.role)!=="admin"&&!(s!=null&&s.fpo_id)&&t({...r,fpo_id:l==null?void 0:l.entity_id})},[l]),c.useEffect(()=>{o("loading",!0),p.get(`${g}/fpos/summary`,{headers:{Authorization:`Bearer ${u}`}}).then(a=>{var i;v((i=a==null?void 0:a.data)==null?void 0:i.data)}).catch(a=>{console.log(a)}).finally(()=>{o("loading",!1)})},[]),e.jsxs("form",{className:"py-8 px-8",onSubmit:a=>{a.preventDefault(),_()},children:[e.jsx(S,{children:s!=null&&s.fpo_name?`Create a new Agent for ${s==null?void 0:s.fpo_name}`:"Create New Agent"}),s!=null&&s.fpo_id||(l==null?void 0:l.role)!=="admin"?null:e.jsxs("div",{className:"py-4",children:[e.jsx(n,{htmlFor:"fpo_id",children:"Select FPO"}),e.jsx(q,{id:"fpo_id",value:r==null?void 0:r.fpo_id,onValueChange:a=>t({...r,fpo_id:a}),children:m==null?void 0:m.map((a,i)=>e.jsx(E,{value:a==null?void 0:a.id,icon:B,children:a==null?void 0:a.fpo_name},i))})]}),e.jsxs("div",{className:"flex space-x-4 items-center py-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"First Name"}),e.jsx(d,{id:"first_name",required:!0,type:"text",placeholder:"First Name",value:r.first_name,onChange:a=>t({...r,first_name:a.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Last Name"}),e.jsx(d,{id:"last_name",required:!0,type:"text",placeholder:"Last Name",value:r.last_name,onChange:a=>t({...r,last_name:a.target.value})})]})]}),e.jsxs("div",{className:"flex space-x-4 items-center py-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Email"}),e.jsx(d,{id:"email",type:"email",placeholder:"",value:r.email,onChange:a=>t({...r,email:a.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Phone Number"}),e.jsx(d,{id:"phone_number",required:!0,type:"text",placeholder:"",value:r.phone_number,onChange:a=>t({...r,phone_number:a.target.value})})]})]}),e.jsxs("div",{className:"flex space-x-4 items-center py-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Age"}),e.jsx(d,{id:"age",required:!0,type:"number",placeholder:"",value:r.age,onChange:a=>t({...r,age:a.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Gender"}),e.jsxs(L,{id:"gender",required:!0,value:r.gender,onChange:a=>t({...r,gender:a.target.value}),children:[e.jsx("option",{selected:!0,value:"",children:"-- Choose gender --"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 items-center py-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Designation"}),e.jsx(d,{id:"designation",required:!0,type:"text",placeholder:"",value:r.designation,onChange:a=>t({...r,designation:a.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Residence"}),e.jsx(d,{id:"residence",required:!0,type:"text",placeholder:"",value:r.residence,onChange:a=>t({...r,residence:a.target.value})})]})]}),e.jsxs("div",{className:"flex space-x-4 items-center py-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Referee Name"}),e.jsx(d,{id:"referee_name",required:!0,type:"text",placeholder:"",value:r.referee_name,onChange:a=>t({...r,referee_name:a.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"regular-form-1",children:"Referee Phone number"}),e.jsx(d,{id:"referee_phone_number",type:"text",required:!0,placeholder:"",value:r.referee_phone_number,onChange:a=>t({...r,referee_phone_number:a.target.value})})]})]}),e.jsx("div",{className:"flex py-4",children:e.jsx(R,{"data-btn-role":"submit",variant:"primary",className:"w-full xl:mr-3",onClick:()=>{},children:"Save"})})]})};export{O as default};
