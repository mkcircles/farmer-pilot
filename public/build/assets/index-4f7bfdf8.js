import{a as B,b as I,u as k,r as a,A as U,B as P,l as N,j as e,C as W,h as R,i as T,d as H}from"./app-e6992d92.js";import{b as V,a as q,e as G,A as J,q as K,r as Q,t as X,v as Y,w as _,x as l,y as Z,z as i}from"./Tracker-4692a53f.js";import{n as y}from"./numberFormatter-373bc269.js";import{P as D}from"./index-9e14f1ab.js";import"./Transition-ddbebfc1.js";import"./default-config-939e3be8.js";function le(){var w,v;B();const x=I(),g=k(s=>s.auth.token),o=k(s=>s.auth.user),{updateAppContextState:j}=a.useContext(U),[c,L]=a.useState(1),[d,p]=a.useState(1),[C,F]=a.useState(1),[S,A]=a.useState(""),[E,O]=a.useState("");a.useState(null);const[t,M]=a.useState(null),[h,$]=a.useState([]),z=s=>{if(h.length===0||(h==null?void 0:h.find(n=>N.isEqual(n,s==null?void 0:s.fpo_name))))return!0};let u=`${P}/fpos`;(o==null?void 0:o.role)!=="admin"&&(u=`${P}/fpo/${o==null?void 0:o.entity_id}/agents`);const m=(s=u)=>{j("loading",!0),H.get(s,{headers:{Authorization:`Bearer ${g}`}}).then(r=>{var f,b;console.log("FPO Data",(f=r==null?void 0:r.data)==null?void 0:f.data);let n=(b=r==null?void 0:r.data)==null?void 0:b.data;r!=null&&r.data&&(L(n==null?void 0:n.current_page),A(n==null?void 0:n.prev_page_url),O(n==null?void 0:n.next_page_url),F(n==null?void 0:n.last_page),M(n))}).catch(r=>{console.log(r)}).finally(()=>{j("loading",!1)})};return a.useEffect(()=>{m()},[g]),a.useEffect(()=>{d!=c&&p(c)},[c]),a.useEffect(()=>{d!=c&&N.debounce(m,1e3)(`${u}?page=${d||1}`)},[d]),e.jsx("div",{className:"w-full h-full py-4",children:e.jsxs(V,{className:"bg-white h-full w-full",children:[e.jsxs(q,{justifyContent:"start",className:"space-x-2",children:[e.jsx(G,{children:"FPOs"}),e.jsxs(J,{color:"gray",children:["Showing ",((w=t==null?void 0:t.data)==null?void 0:w.length)||0," of"," ",y(parseInt((t==null?void 0:t.total)||0))]})]}),e.jsxs("div",{className:"flex space-x-4 items-center w-full lg:justify-between justify-start py-5",children:[e.jsx("div",{className:"flex items-center w-52 lg:w-80",children:e.jsx(K,{onValueChange:$,placeholder:"Search FPOs...",className:"max-w-md",children:t==null?void 0:t.data.map(s=>e.jsx(Q,{value:s.fpo_name,children:s==null?void 0:s.fpo_name},s.id))})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{role:"btn-create-fpo",onClick:()=>{x(W)},className:"inline-flex overflow-hidden rounded-md border bg-secondary shadow-sm",children:[e.jsx("button",{className:"inline-block border-e px-4 py-2 text-sm font-medium text-white hover:bg-orange-500 focus:relative",children:"Create FPO"}),e.jsx("button",{className:"inline-block px-4 py-2 text-white hover:bg-orange-500 focus:relative",title:"Create FPO",children:e.jsx("svg",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]})})]}),e.jsxs(X,{className:"",children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"FPO ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Phone"}),e.jsx(l,{children:"District"}),e.jsx(l,{children:"Address"}),e.jsx(l,{children:"Member Count"}),e.jsx(l,{children:"Action"})]})}),e.jsx(Z,{children:(v=t==null?void 0:t.data)==null?void 0:v.filter(s=>z(s)).map(s=>e.jsxs(_,{className:"m-0",children:[e.jsxs(i,{children:["# ",s.id]}),e.jsx(i,{children:s.fpo_name}),e.jsx(i,{children:s.contact_phone_number}),e.jsx(i,{children:s.district}),e.jsx(i,{children:s.address}),e.jsx(i,{children:y(parseInt(s.fpo_membership_number))}),e.jsx(i,{children:e.jsxs("span",{className:"group relative flex items-center justify-end transition-all duration-700",children:[e.jsxs("span",{className:"hidden absolute z-10  group-hover:inline-flex overflow-hidden rounded-md border bg-white shadow-sm",children:[e.jsx("button",{onClick:()=>x(`${R}/${s.id}`),className:"inline-block border-e px-3 py-3 text-gray-700 hover:bg-gray-50 focus:relative",title:"View FPO Profile",children:e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:()=>{x(T,{state:{fpo:s}})},className:"inline-block border-e px-3 py-3 text-gray-700 hover:bg-gray-50 focus:relative",title:"Edit FPO",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),e.jsx("button",{className:"inline-block px-3 py-3 text-gray-700 hover:bg-gray-50 focus:relative",title:"Delete",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]}),e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})})]})})]},s.id))})]}),e.jsx(D,{currentPage:c,moveToPage:d,fetchPage:m,setMoveToPage:p,nextPageUrl:E,prevPageUrl:S,lastPage:C,totalPages:t==null?void 0:t.last_page})]})})}export{le as default};
