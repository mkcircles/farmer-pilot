import{r as a,R as N,T as b,j as o,u as C,A as M,B as v}from"./app-33482b9b.js";import{b as E}from"./Tracker-0f9363de.js";import{m as u}from"./mapbox-gl-42065be8.js";import"./Transition-160ed615.js";import"./default-config-939e3be8.js";u.accessToken="pk.eyJ1Ijoia2FsdWpqYSIsImEiOiJjbGpyNGFhbzQwMGU2M2VvaDNubjFhNnppIn0.mpz17Jy5Eue59jCM-ReiZQ";const L=({onClick:s,children:r,fpo:e})=>o.jsx("button",{title:e==null?void 0:e.fpo_name,className:"text-secondary rounded-full bg-transparent p-1 text-center no-underline inline-block",children:r}),R=({fpoData:s})=>{const r=a.useRef(null),[e,p]=a.useState(32.5457),[d,i]=a.useState(1.3316),[t,x]=a.useState(6.2);a.useEffect(()=>{const n=new u.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[e,d],zoom:t});return s==null||s.forEach(l=>{var g,j;if(!(l!=null&&l.fpo_cordinates))return;let h=(j=(g=l.fpo_cordinates)==null?void 0:g.split(","))==null?void 0:j.map(w=>parseFloat(w)),f=h[0],k=h[1];if(isNaN(k)||isNaN(f))return;const m=N.createRef();m.current=document.createElement("div"),b.render(o.jsx(L,{onClick:c,fpo:l,children:o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]})}),m.current),new u.Marker(m.current).setLngLat([k,f]).addTo(n)}),n.addControl(new u.NavigationControl,"top-right"),()=>n.remove()},[]);const c=n=>{window.alert(n)};return o.jsx("div",{className:" h-full w-full relative",ref:r})},I=()=>{const s=C(i=>i.auth.token),{updateAppContextState:r}=a.useContext(M),[e,p]=a.useState(null),d=(i=`${v}/fpos/coordinates`)=>{r("loading",!0),axios.get(i,{headers:{Authorization:`Bearer ${s}`}}).then(t=>{var c,n;console.log("FPO Data",(c=t==null?void 0:t.data)==null?void 0:c.data);let x=(n=t==null?void 0:t.data)==null?void 0:n.data;t!=null&&t.data&&p(x)}).catch(t=>{console.log(t)}).finally(()=>{r("loading",!1)})};return a.useEffect(()=>{d()},[]),o.jsx(E,{className:"my-4 h-full w-full absolute inset-0",children:e&&o.jsx(R,{fpoData:e})})};export{I as default};
