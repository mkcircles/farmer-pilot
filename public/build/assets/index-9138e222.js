import{e as w,v as y,r as A,A as C,R as g,j as e,a4 as E,a5 as F,a6 as R,C as B,B as L}from"./app-6297a591.js";import{B as P}from"./index-63b493ab.js";import{F as j,a as S}from"./index-01adfa89.js";import"./tw-merge-e660f026.js";function _(){const s=w(),o=y(),{updateAppContextState:r}=A.useContext(C),[l,v]=g.useState(""),[n,N]=g.useState(""),k=()=>{let t=`${L}/login`;r("loading",!0),axios.post(t,{email:l,password:n}).then(a=>{var i,m,c,d,x,p,u,f,h,b;["admin","fpo"].includes((c=(m=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:m.user)==null?void 0:c.role)?(s(E((x=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:x.token)),s(F((u=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:u.user)),["fpo"].includes((b=(h=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:h.user)==null?void 0:b.role)?o("/farmers-list"):o("/")):s(R({message:"You are not authorized to access this resource.",id:B()}))}).catch(a=>{console.log(a)}).finally(()=>{r("loading",!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"flex items-center justify-center w-full min-h-screen p-5 md:p-20",children:e.jsxs("div",{className:"w-96 intro-y",children:[e.jsx("div",{className:"text-2xl font-medium text-center text-white dark:text-slate-300 mt-14",children:"Login to Your Account!"}),e.jsxs("div",{className:"box px-5 py-8 mt-10 max-w-[450px] relative before:content-[''] before:z-[-1] before:w-[95%] before:h-full before:bg-slate-200 before:border before:border-slate-200 before:-mt-5 before:absolute before:rounded-lg before:mx-auto before:inset-x-0 before:dark:bg-darkmode-600/70 before:dark:border-darkmode-500/60",children:[e.jsx(j,{name:"email",type:"text",className:"block px-4 py-3",placeholder:"Email",value:l,onChange:t=>v(t.target.value)}),e.jsx(j,{name:"password",type:"password",className:"block px-4 py-3 mt-4",placeholder:"Password",value:n,onChange:t=>N(t.target.value)}),e.jsxs("div",{className:"flex mt-4 text-xs text-slate-500 sm:text-sm",children:[e.jsxs("div",{className:"flex items-center mr-auto",children:[e.jsx(S.Input,{id:"remember-me",type:"checkbox",className:"mr-2 border"}),e.jsx("label",{className:"cursor-pointer select-none",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("a",{href:"",children:"Forgot Password?"})]}),e.jsx("div",{className:"mt-5 text-center xl:mt-8 xl:text-left",children:e.jsx(P,{variant:"primary",className:"w-full xl:mr-3",onClick:()=>{k()},children:"Login"})})]})]})})})})}export{_ as default};
