import{bl as w,v as R,u as U,r,A as F,B as T,D as O,j as e,b as _,c as z,i as M,M as G,n as K,m as p,G as D,H,I as f,J as i,K as J,L as t,W as S,z as W,bd as Y,N as q,O as Q,be as V}from"./app-ffa37ed4.js";import{C as X}from"./copy-ca154a91.js";function se(o){var d,P;const v=w(),a=R(),j=U(s=>s.auth.token),{updateAppContextState:m}=r.useContext(F),[x,A]=r.useState(1),[h,g]=r.useState(1),[I,y]=r.useState(1),[C,E]=r.useState(""),[$,k]=r.useState(""),[l,B]=r.useState({}),N=(o==null?void 0:o.biometrics_api_url)||`${T}/farmers/bio`,u=(s=N)=>{m("loading",!0),Q.get(s,{headers:{API_KEY:V,Authorization:`Bearer ${j}`}}).then(c=>{var b;let n=(b=c.data)==null?void 0:b.data;console.log("Profiles",n),c!=null&&c.data&&(A(parseInt(n==null?void 0:n.current_page)),E(n==null?void 0:n.prev_page_url),k(n==null?void 0:n.next_page_url),y(n==null?void 0:n.last_page),B(n))}).catch(c=>{console.log(c)}).finally(()=>{m("loading",!1)})},L=O.debounce(u,1e3);return r.useEffect(()=>{u()},[j]),r.useEffect(()=>{h!=x&&g(x)},[x]),r.useEffect(()=>{h!=x&&L(`${N}?page=${h}`)},[h]),e.jsx("div",{className:"w-full h-full py-4",children:((d=l==null?void 0:l.data)==null?void 0:d.length)>0?e.jsxs(_,{className:"bg-white h-full w-full",children:[e.jsxs(z,{justifyContent:"start",className:"space-x-2",children:[e.jsx(M,{children:"Biometrics"}),e.jsx(G,{color:"gray",children:K(parseInt((l==null?void 0:l.total)||0))})]}),e.jsxs(p,{className:"mt-2",children:["Overview of ",(o==null?void 0:o.title)||"Biometrics captured"]}),e.jsxs(D,{className:"mt-6",children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(i,{children:"Farmer ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Enrollment Status"}),e.jsx(i,{children:"Possible Duplicate"}),e.jsx(i,{className:"",children:"BioToken"}),e.jsx(i,{className:"",children:"rID"}),e.jsx(i,{className:"",children:"ConsentID"}),e.jsx(i,{className:"",children:"Reason"}),e.jsx(i,{className:"",children:"Registered On"}),e.jsx(i,{className:"",children:"Subject ID"}),e.jsx(i,{children:"Link"})]})}),e.jsx(J,{children:(P=l==null?void 0:l.data)==null?void 0:P.map(s=>{var n;let c=s==null?void 0:s.farmer_profile;return e.jsxs(f,{children:[e.jsx(t,{children:c==null?void 0:c.farmer_id}),e.jsx(t,{children:(c==null?void 0:c.first_name)+" "+(c==null?void 0:c.last_name)}),e.jsx(t,{children:(s==null?void 0:s.enrollmentStatus)||"-"}),e.jsx(t,{children:s!=null&&s.possible_duplicate?e.jsx("span",{onClick:()=>{a(`${S}/${s==null?void 0:s.possible_duplicate}`)},className:"text-secondary cursor-pointer",children:"Link"}):"No"}),e.jsx(t,{className:"",children:s!=null&&s.hasBiometricToken?"Present":"N/A"}),e.jsx(t,{className:"",children:s!=null&&s.rID?"Present":"N/A"}),e.jsx(t,{className:"",children:s!=null&&s.consentGUID?"Present":"N/A"}),e.jsx(t,{className:"",children:(s==null?void 0:s.reason)||"N/A"}),e.jsx(t,{children:(n=new Date(c==null?void 0:c.created_at))==null?void 0:n.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx(t,{children:s!=null&&s.subjectID?e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{title:"Copy",className:"px-2",children:e.jsx(X,{onClick:()=>{navigator.clipboard.writeText(s==null?void 0:s.subjectID),v(W({message:"Subject ID Copied to Clipboard"}))},className:"w-4 h-4 text-primary cursor-pointer hover:scale-125 "})}),e.jsx("span",{children:"Present"})]}):e.jsx("span",{className:"text-primary",children:"N/A"})}),e.jsx(t,{children:e.jsx(Y,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{a(`${S}/${c==null?void 0:c.farmer_id}`)},children:"See details"})})]},c==null?void 0:c.id)})})]}),e.jsx(q,{currentPage:x,moveToPage:h,fetchPage:u,setMoveToPage:g,nextPageUrl:$,prevPageUrl:C,lastPage:I,totalPages:l==null?void 0:l.last_page})]}):e.jsx(_,{className:"flex justify-center items-center border border-dashed p-16 border-gray-300",children:e.jsx(p,{children:"No data"})})})}export{se as default};
