import{a as k,b as w,r as n,A,u as _,j as e,B as N,s as M,v as I,d as P,L as F,E as $}from"./app-148b5813.js";import{L as m,S as z,P as E,g as B,f as T,h as D}from"./index-df2548c0.js";import{B as S}from"./index-059aad33.js";import L from"./index-402adc75.js";import{e as U,l as R,o as q,A as y}from"./Tracker-80364376.js";import{F as g}from"./index-c01990a8.js";import{F as j}from"./index-a72d00f2.js";import{T as G}from"./tablet-10041764.js";import{W as v}from"./WithConfirmAlert-18edc7cc.js";import"./tw-merge-fbb83fc6.js";import"./default-config-939e3be8.js";import"./numberFormatter-373bc269.js";import"./index-77495178.js";import"./Transition-4aa677f3.js";const W=({showModal:f,setShowModal:x,agent:i,setAgentData:s})=>{const h=k();w();const{updateAppContextState:u}=n.useContext(A),p=_(l=>{var o;return(o=l.auth)==null?void 0:o.token}),[a,r]=n.useState({agent_id:i==null?void 0:i.id,brand:"",device_id:"",assigned_phone_number:""}),d=()=>{u("loading",!0),axios.post(`${N}/agent/device/add`,{...a,agent_id:i==null?void 0:i.id},{headers:{Authorization:`Bearer ${p}`}}).then(l=>{x(!1),s({...i,device_id:`${a==null?void 0:a.brand}-${a==null?void 0:a.device_id}`}),h(M({id:I(),message:"Device has been Issued successfully"}))}).catch(l=>{}).finally(()=>{u("loading",!1)})};return e.jsxs("div",{className:`z-[1000] fixed bg-primary rounded-md shadow-md transition-all h-full top-32 bottom-0 right-0 w-full lg:w-1/2 duration-700  ${f?"  translate-x-0  ":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex w-full space-x-8 p-4 ",children:[e.jsx("span",{className:"text-white",onClick:()=>x(!1),children:e.jsx(m,{icon:"XSquare"})}),e.jsxs(U,{className:"text-white",children:["Issue Device to ",(i==null?void 0:i.first_name)+" "+(i==null?void 0:i.last_name)]})]}),e.jsx("div",{className:"h-full flex flex-col bg-slate-50",children:e.jsxs("form",{className:"py-8 px-8",onSubmit:l=>{l.preventDefault(),d()},children:[e.jsxs("div",{className:"py-4",children:[e.jsx(j,{htmlFor:"brand",children:"Brand"}),e.jsx(R,{value:a==null?void 0:a.brand,onValueChange:l=>r({...a,brand:l}),children:["Samsung Active Tab Pro - SM-T540 (Wi-Fi only)","Samsung Active Tab Pro - SM-T547 (LTE)","Famoco FX 205 SE","Samsung Galaxy Tab Active 3","Samsung A53 (SM-A536U1 model only)"].map((l,o)=>e.jsx(q,{value:l,icon:G,children:l},o))})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(j,{htmlFor:"name",children:"Device ID"}),e.jsx(g,{id:"device_id",required:!0,type:"text",placeholder:"",value:a==null?void 0:a.device_id,onChange:l=>r({...a,device_id:l.target.value})})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(j,{htmlFor:"name",children:"Assigned Phone Number"}),e.jsx(g,{id:"assigned_phone_number",required:!0,type:"text",placeholder:"",value:a==null?void 0:a.assigned_phone_number,onChange:l=>r({...a,assigned_phone_number:l.target.value})})]}),e.jsx("div",{className:"flex py-4",children:e.jsx(S,{variant:"primary",className:"w-full",onClick:()=>{},children:"Save"})})]})})]})};function le(){const f=w(),x=_(t=>t.auth.token),{updateAppContextState:i}=n.useContext(A),[s,h]=n.useState(null),[u,p]=n.useState(!1),[a,r]=n.useState(!1),d=n.useRef(null);let{id:l}=P();n.useEffect(()=>{i("loading",!0),axios.get(`${N}/agent/${l}`,{headers:{Authorization:`Bearer ${x}`}}).then(({data:t})=>{console.log("Agent Data",t.data),t!=null&&t.data&&h(t==null?void 0:t.data)}).catch(t=>{console.log(t)}).finally(()=>{i("loading",!1)})},[l]),n.useEffect(()=>{setTimeout(()=>{var t;(t=d==null?void 0:d.current)==null||t.scrollIntoView({behavior:"smooth"})},3e3)},[d]);const o=t=>new Promise((C,b)=>{i("loading",!0),axios.put(`${N}/agent/status/update`,{agent_id:s==null?void 0:s.id,status:t},{headers:{Authorization:`Bearer ${x}`}}).then(({data:c})=>{if(console.log("Agent Data",c.data),c!=null&&c.data)return h(c==null?void 0:c.data),C({message:t==="active"?"Agent has been activated":t==="inactive"?"Agent has been deactivated":t==="suspended"?"Agent has been suspended":"Agent has been blacklisted",title:"success"});b({message:"Something went wrong",title:"error"})}).catch(c=>{console.log(c),b({message:"Something went wrong",title:"error"})}).finally(()=>{i("loading",!1)})});return s?e.jsxs(e.Fragment,{children:[e.jsx(W,{agent:s,showModal:u,setShowModal:p,setAgentData:h}),e.jsxs("div",{ref:d,className:"flex flex-col items-center mt-8 intro-y sm:flex-row",children:[e.jsx("h2",{className:"flex items-center mr-auto text-lg font-medium",children:"Agent Profile"}),e.jsx("div",{className:"flex w-full mt-4 space-x-2 sm:w-auto sm:mt-0",children:e.jsxs(S,{onClick:()=>{r(!a)},variant:"primary",className:"mr-2 shadow-md",children:[e.jsx(m,{icon:"Settings",className:"w-4 h-4 mr-2"})," ","Manage Agent Account"]})})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-5 mt-5 relative",children:[e.jsx("div",{className:"col-span-12",children:e.jsx("div",{className:"px-3 pt-3 pb-5 box intro-y",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center lg:flex-row lg:text-left",children:[e.jsx("div",{className:"z-20 lg:-mt-10 lg:ml-10",children:e.jsx("div",{className:"w-40 h-40 overflow-hidden border-4 border-white rounded-full shadow-md image-fit",children:e.jsx("img",{alt:"Profile Photo",className:"rounded-md",src:s==null?void 0:s.photo})})}),e.jsxs("div",{className:"lg:ml-5",children:[e.jsxs("h2",{className:"mt-5 text-lg font-medium",children:[e.jsx("span",{children:(s==null?void 0:s.first_name)+" "+(s==null?void 0:s.last_name)}),e.jsx("span",{className:"relative -top-1 -right-1",children:(s==null?void 0:s.status)==="active"?e.jsx(y,{className:"capitalize shadow-md bg-green-300",size:"sm",color:"green",children:s==null?void 0:s.status}):e.jsx(y,{className:"capitalize",size:"sm",color:"orange",children:s==null?void 0:s.status})})]}),e.jsxs("div",{className:"flex items-center justify-center mt-2 text-slate-500 lg:justify-start",children:[e.jsx(m,{icon:"Briefcase",className:"w-4 h-4 mr-2"})," ",s==null?void 0:s.designation]}),e.jsxs("div",{className:"flex items-center justify-center mt-2 text-slate-500 lg:justify-start",children:[e.jsx(m,{icon:"MapPin",className:"w-4 h-4 mr-2"})," ",s==null?void 0:s.residence,", UG"]})]}),e.jsxs("div",{className:"grid h-24 grid-cols-2 px-10 mx-auto mb-6 border-dashed gap-y-2 md:gap-y-0 lg:border-l lg:border-r border-slate-200 lg:mb-0",children:[e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx(m,{icon:"Phone",className:"w-4 h-4 mr-2"}),s==null?void 0:s.phone_number]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx(m,{icon:"Mail",className:"w-4 h-4 mr-2"}),s==null?void 0:s.email]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx("span",{className:"w-fit h-4 mr-2 flex items-center opacity-75",children:"Referee:"}),s==null?void 0:s.referee_name]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx("span",{className:"w-fit h-4 mr-2 flex items-center opacity-75",children:"Referee Phone:"}),s==null?void 0:s.referee_phone_number]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 lg:justify-start",children:[e.jsx(m,{icon:"SmartphoneCharging",className:"w-4 h-4 mr-2"}),s!=null&&s.device_id?e.jsxs("span",{className:"text-primary font-thin",children:[s==null?void 0:s.device_id," |"," ",s==null?void 0:s.assigned_phone_number]}):e.jsx("span",{className:"text-white bg-primary px-2 rounded",children:"Device Not Issued"})]})]})]})})}),e.jsxs("div",{className:`flex flex-col absolute transition-all duration-700 sm:end-0 end-auto w-48 mr-1 ${a?"-top-4 z-50 h-fit box":"top-8 z-50 h-0 overflow-hidden"}`,children:[e.jsxs("div",{onClick:()=>{p(!0),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(z,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Issue Device"})]}),e.jsxs("div",{onClick:()=>{f($,{state:{agent:s}})},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(E,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Edit Information"})]}),(s==null?void 0:s.status)!=="active"&&e.jsxs("div",{onClick:()=>{v(()=>o("active")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(B,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Activate Account"})]}),(s==null?void 0:s.status)!=="suspended"&&e.jsxs("div",{onClick:()=>{v(()=>o("suspended")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(T,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Suspend Account"})]}),(s==null?void 0:s.status)!=="blacklisted"&&e.jsxs("div",{onClick:()=>{v(()=>o("blacklisted")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(D,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Blacklist Account"})]})]})]}),e.jsx("div",{className:"w-full h-full",children:e.jsx(L,{agent_id:l})})]}):e.jsx(F,{})}export{le as default};
