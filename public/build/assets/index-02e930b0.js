import{a as C,b as g,r as o,A as w,u as A,j as e,B as v,s as k,v as M,d as P,E as I}from"./app-65fbab72.js";import{L as n,S as F,P as $,g as z,f as T,h as B}from"./index-0438ef2a.js";import{B as _}from"./index-886d5e62.js";import E from"./index-bef87add.js";import{e as D,l as U,o as L,A as b}from"./Tracker-33d5ea18.js";import{F as y}from"./index-c61fa346.js";import{F as f}from"./index-32124735.js";import{T as R}from"./tablet-de5c15bb.js";import{W as j}from"./WithConfirmAlert-bf084f0b.js";import"./tw-merge-fbb83fc6.js";import"./default-config-939e3be8.js";import"./numberFormatter-373bc269.js";import"./index-0cba895a.js";import"./Transition-da004935.js";const q=({showModal:p,setShowModal:d,agent:i,setAgentData:s})=>{const m=C();g();const{updateAppContextState:h}=o.useContext(w),u=A(l=>{var t;return(t=l.auth)==null?void 0:t.token}),[a,r]=o.useState({agent_id:i==null?void 0:i.id,brand:"",device_id:"",assigned_phone_number:""}),x=()=>{h("loading",!0),axios.post(`${v}/agent/device/add`,{...a,agent_id:i==null?void 0:i.id},{headers:{Authorization:`Bearer ${u}`}}).then(l=>{d(!1),s({...i,device_id:`${a==null?void 0:a.brand}-${a==null?void 0:a.device_id}`}),m(k({id:M(),message:"Device has been Issued successfully"}))}).catch(l=>{}).finally(()=>{h("loading",!1)})};return e.jsxs("div",{className:`z-[1000] fixed bg-primary rounded-md shadow-md transition-all h-full top-32 bottom-0 right-0 w-full lg:w-1/2 duration-700  ${p?"  translate-x-0  ":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex w-full space-x-8 p-4 ",children:[e.jsx("span",{className:"text-white",onClick:()=>d(!1),children:e.jsx(n,{icon:"XSquare"})}),e.jsxs(D,{className:"text-white",children:["Issue Device to ",(i==null?void 0:i.first_name)+" "+(i==null?void 0:i.last_name)]})]}),e.jsx("div",{className:"h-full flex flex-col bg-slate-50",children:e.jsxs("form",{className:"py-8 px-8",onSubmit:l=>{l.preventDefault(),x()},children:[e.jsxs("div",{className:"py-4",children:[e.jsx(f,{htmlFor:"brand",children:"Brand"}),e.jsx(U,{value:a==null?void 0:a.brand,onValueChange:l=>r({...a,brand:l}),children:["Samsung Active Tab Pro - SM-T540 (Wi-Fi only)","Samsung Active Tab Pro - SM-T547 (LTE)","Famoco FX 205 SE","Samsung Galaxy Tab Active 3","Samsung A53 (SM-A536U1 model only)"].map((l,t)=>e.jsx(L,{value:l,icon:R,children:l},t))})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(f,{htmlFor:"name",children:"Device ID"}),e.jsx(y,{id:"device_id",required:!0,type:"text",placeholder:"",value:a==null?void 0:a.device_id,onChange:l=>r({...a,device_id:l.target.value})})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(f,{htmlFor:"name",children:"Assigned Phone Number"}),e.jsx(y,{id:"assigned_phone_number",required:!0,type:"text",placeholder:"",value:a==null?void 0:a.assigned_phone_number,onChange:l=>r({...a,assigned_phone_number:l.target.value})})]}),e.jsx("div",{className:"flex py-4",children:e.jsx(_,{variant:"primary",className:"w-full",onClick:()=>{},children:"Save"})})]})})]})};function te(){const p=g(),d=A(t=>t.auth.token),{updateAppContextState:i}=o.useContext(w),[s,m]=o.useState(null),[h,u]=o.useState(!1),[a,r]=o.useState(!1);let{id:x}=P();o.useEffect(()=>{i("loading",!0),axios.get(`${v}/agent/${x}`,{headers:{Authorization:`Bearer ${d}`}}).then(({data:t})=>{console.log("Agent Data",t.data),t!=null&&t.data&&m(t==null?void 0:t.data)}).catch(t=>{console.log(t)}).finally(()=>{i("loading",!1)})},[x]);const l=t=>new Promise((S,N)=>{i("loading",!0),axios.put(`${v}/agent/status/update`,{agent_id:s==null?void 0:s.id,status:t},{headers:{Authorization:`Bearer ${d}`}}).then(({data:c})=>{if(console.log("Agent Data",c.data),c!=null&&c.data)return m(c==null?void 0:c.data),S({message:t==="active"?"Agent has been activated":t==="inactive"?"Agent has been deactivated":t==="suspended"?"Agent has been suspended":"Agent has been blacklisted",title:"success"});N({message:"Something went wrong",title:"error"})}).catch(c=>{console.log(c),N({message:"Something went wrong",title:"error"})}).finally(()=>{i("loading",!1)})});return e.jsxs(e.Fragment,{children:[e.jsx(q,{agent:s,showModal:h,setShowModal:u,setAgentData:m}),e.jsxs("div",{className:"flex flex-col items-center mt-8 intro-y sm:flex-row",children:[e.jsx("h2",{className:"flex items-center mr-auto text-lg font-medium",children:"Agent Profile"}),e.jsx("div",{className:"flex w-full mt-4 space-x-2 sm:w-auto sm:mt-0",children:e.jsxs(_,{onClick:()=>{r(!a)},variant:"primary",className:"mr-2 shadow-md",children:[e.jsx(n,{icon:"Settings",className:"w-4 h-4 mr-2"})," ","Manage Agent Account"]})})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-5 mt-5 relative",children:[e.jsx("div",{className:"col-span-12",children:e.jsx("div",{className:"px-3 pt-3 pb-5 box intro-y",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center lg:flex-row lg:text-left",children:[e.jsx("div",{className:"z-20 lg:-mt-10 lg:ml-10",children:e.jsx("div",{className:"w-40 h-40 overflow-hidden border-4 border-white rounded-full shadow-md image-fit",children:e.jsx("img",{alt:"Profile Photo",className:"rounded-md",src:s==null?void 0:s.photo})})}),e.jsxs("div",{className:"lg:ml-5",children:[e.jsxs("h2",{className:"mt-5 text-lg font-medium",children:[e.jsx("span",{children:(s==null?void 0:s.first_name)+" "+(s==null?void 0:s.last_name)}),e.jsx("span",{className:"relative -top-1 -right-1",children:(s==null?void 0:s.status)==="active"?e.jsx(b,{className:"capitalize shadow-md bg-green-300",size:"sm",color:"green",children:s==null?void 0:s.status}):e.jsx(b,{className:"capitalize",size:"sm",color:"orange",children:s==null?void 0:s.status})})]}),e.jsxs("div",{className:"flex items-center justify-center mt-2 text-slate-500 lg:justify-start",children:[e.jsx(n,{icon:"Briefcase",className:"w-4 h-4 mr-2"})," ",s==null?void 0:s.designation]}),e.jsxs("div",{className:"flex items-center justify-center mt-2 text-slate-500 lg:justify-start",children:[e.jsx(n,{icon:"MapPin",className:"w-4 h-4 mr-2"})," ",s==null?void 0:s.residence,", UG"]})]}),e.jsxs("div",{className:"grid h-24 grid-cols-2 px-10 mx-auto mb-6 border-dashed gap-y-2 md:gap-y-0 lg:border-l lg:border-r border-slate-200 lg:mb-0",children:[e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx(n,{icon:"Phone",className:"w-4 h-4 mr-2"}),s==null?void 0:s.phone_number]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx(n,{icon:"Mail",className:"w-4 h-4 mr-2"}),s==null?void 0:s.email]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx("span",{className:"w-fit h-4 mr-2 flex items-center opacity-75",children:"Referee:"}),s==null?void 0:s.referee_name]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 md:col-span-1 lg:justify-start",children:[e.jsx("span",{className:"w-fit h-4 mr-2 flex items-center opacity-75",children:"Referee Phone:"}),s==null?void 0:s.referee_phone_number]}),e.jsxs("div",{className:"flex items-center justify-center col-span-2 lg:justify-start",children:[e.jsx(n,{icon:"SmartphoneCharging",className:"w-4 h-4 mr-2"}),s!=null&&s.device_id?e.jsxs("span",{className:"text-primary font-thin",children:[s==null?void 0:s.device_id," |"," ",s==null?void 0:s.assigned_phone_number]}):e.jsx("span",{className:"text-white bg-primary px-2 rounded",children:"Device Not Issued"})]})]})]})})}),e.jsxs("div",{className:`flex flex-col absolute transition-all duration-700 sm:end-0 end-auto w-48 mr-1 ${a?"-top-4 z-50 h-fit box":"top-8 z-50 h-0 overflow-hidden"}`,children:[e.jsxs("div",{onClick:()=>{u(!0),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(F,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Issue Device"})]}),e.jsxs("div",{onClick:()=>{p(I,{state:{agent:s}})},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx($,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Edit Information"})]}),(s==null?void 0:s.status)!=="active"&&e.jsxs("div",{onClick:()=>{j(()=>l("active")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(z,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Activate Account"})]}),(s==null?void 0:s.status)!=="suspended"&&e.jsxs("div",{onClick:()=>{j(()=>l("suspended")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(T,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Suspend Account"})]}),(s==null?void 0:s.status)!=="blacklisted"&&e.jsxs("div",{onClick:()=>{j(()=>l("blacklisted")),r(!1)},className:"flex border-b space-x-2 p-4 items-center cursor-pointer",children:[e.jsx(B,{className:"w-5 h-5 text-secondary "}),e.jsx("span",{className:"text-primary",children:"Blacklist Account"})]})]})]}),e.jsx("div",{className:"w-full h-full",children:e.jsx(E,{agent_id:x})})]})}export{te as default};
