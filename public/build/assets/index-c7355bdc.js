import{b as U,u as F,r,A as L,B as R,l as w,j as e,F as f,d as T,T as z}from"./app-f8751d23.js";import{b,a as O,e as G,A as M,m as S,t as K,v as Y,w as A,x as i,y as q,z as t,F as H}from"./Tracker-361e94fb.js";import{n as J}from"./numberFormatter-373bc269.js";import{P as Q}from"./index-5b2e8740.js";import"./Transition-3d8a7619.js";import"./default-config-939e3be8.js";function se(o){var N,P;const j=U(),m=F(s=>s.auth.token),{updateAppContextState:a}=r.useContext(L),[x,v]=r.useState(1),[h,g]=r.useState(1),[I,y]=r.useState(1),[E,$]=r.useState(""),[k,p]=r.useState(""),[l,B]=r.useState({}),d=(o==null?void 0:o.biometrics_api_url)||`${R}/farmers/bio`,u=(s=d)=>{a("loading",!0),T.get(s,{headers:{API_KEY:z,Authorization:`Bearer ${m}`}}).then(n=>{var _;let c=(_=n.data)==null?void 0:_.data;console.log("Profiles",c),n!=null&&n.data&&(v(parseInt(c==null?void 0:c.current_page)),$(c==null?void 0:c.prev_page_url),p(c==null?void 0:c.next_page_url),y(c==null?void 0:c.last_page),B(c))}).catch(n=>{console.log(n)}).finally(()=>{a("loading",!1)})},C=w.debounce(u,1e3);return r.useEffect(()=>{u()},[m]),r.useEffect(()=>{h!=x&&g(x)},[x]),r.useEffect(()=>{h!=x&&C(`${d}?page=${h}`)},[h]),e.jsx("div",{className:"w-full h-full py-4",children:((N=l==null?void 0:l.data)==null?void 0:N.length)>0?e.jsxs(b,{className:"bg-white h-full w-full",children:[e.jsxs(O,{justifyContent:"start",className:"space-x-2",children:[e.jsx(G,{children:"Biometrics"}),e.jsx(M,{color:"gray",children:J(parseInt((l==null?void 0:l.total)||0))})]}),e.jsxs(S,{className:"mt-2",children:["Overview of ",(o==null?void 0:o.title)||"Biometrics captured"]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(Y,{children:e.jsxs(A,{children:[e.jsx(i,{children:"Farmer ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Enrollment Status"}),e.jsx(i,{children:"Possible Duplicate"}),e.jsx(i,{className:"",children:"BioToken"}),e.jsx(i,{className:"",children:"rID"}),e.jsx(i,{className:"",children:"ConsentGUID"}),e.jsx(i,{className:"",children:"Reason"}),e.jsx(i,{className:"",children:"Registered On"}),e.jsx(i,{className:"",children:"Subject ID"}),e.jsx(i,{children:"Link"})]})}),e.jsx(q,{children:(P=l==null?void 0:l.data)==null?void 0:P.map(s=>{var c;let n=s==null?void 0:s.farmer_profile;return e.jsxs(A,{children:[e.jsx(t,{children:n==null?void 0:n.farmer_id}),e.jsx(t,{children:(n==null?void 0:n.first_name)+" "+(n==null?void 0:n.last_name)}),e.jsx(t,{children:(s==null?void 0:s.enrollmentStatus)||"-"}),e.jsx(t,{children:s!=null&&s.possible_duplicate?e.jsx("span",{onClick:()=>{j(`${f}/${s==null?void 0:s.possible_duplicate}`)},className:"text-secondary cursor-pointer",children:"Link"}):"No"}),e.jsx(t,{className:"",children:s!=null&&s.hasBiometricToken?"Present":"N/A"}),e.jsx(t,{className:"",children:s!=null&&s.rID?"Present":"N/A"}),e.jsx(t,{className:"",children:s!=null&&s.consentGUID?"Present":"N/A"}),e.jsx(t,{className:"",children:(s==null?void 0:s.reason)||"N/A"}),e.jsx(t,{children:(c=new Date(n==null?void 0:n.created_at))==null?void 0:c.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx(t,{children:(s==null?void 0:s.subjectID)||"-"}),e.jsx(t,{children:e.jsx(H,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{j(`${f}/${n==null?void 0:n.farmer_id}`)},children:"See details"})})]},n==null?void 0:n.id)})})]}),e.jsx(Q,{currentPage:x,moveToPage:h,fetchPage:u,setMoveToPage:g,nextPageUrl:k,prevPageUrl:E,lastPage:I,totalPages:l==null?void 0:l.last_page})]}):e.jsx(b,{className:"flex justify-center items-center border border-dashed p-16 border-gray-300",children:e.jsx(S,{children:"No data"})})})}export{se as default};
