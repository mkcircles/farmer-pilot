import{a as w,b as y,r as A,A as C,R as g,j as e,i as E,k as F,m as R,v as B,B as L}from"./app-f8605b1f.js";import{B as P}from"./index-da258023.js";import{F as j,a as S}from"./index-c0876f64.js";import"./tw-merge-fbb83fc6.js";import"./default-config-939e3be8.js";function D(){const s=w(),o=y(),{updateAppContextState:r}=A.useContext(C),[l,v]=g.useState(""),[n,N]=g.useState(""),k=()=>{let a=`${L}/login`;r("loading",!0),axios.post(a,{email:l,password:n}).then(t=>{var i,m,c,d,x,p,u,f,b,h;["admin","fpo"].includes((c=(m=(i=t==null?void 0:t.data)==null?void 0:i.data)==null?void 0:m.user)==null?void 0:c.role)?(s(E((x=(d=t==null?void 0:t.data)==null?void 0:d.data)==null?void 0:x.token)),s(F((u=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:u.user)),["fpo"].includes((h=(b=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:b.user)==null?void 0:h.role)?o("/farmers-list"):o("/")):s(R({message:"You are not authorized to access this resource.",id:B()}))}).catch(t=>{console.log(t)}).finally(()=>{r("loading",!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"flex items-center justify-center w-full min-h-screen p-5 md:p-20",children:e.jsxs("div",{className:"w-96 intro-y",children:[e.jsx("div",{className:"text-2xl font-medium text-center text-white dark:text-slate-300 mt-14",children:"Login to Your Account!"}),e.jsxs("div",{className:"box px-5 py-8 mt-10 max-w-[450px] relative before:content-[''] before:z-[-1] before:w-[95%] before:h-full before:bg-slate-200 before:border before:border-slate-200 before:-mt-5 before:absolute before:rounded-lg before:mx-auto before:inset-x-0 before:dark:bg-darkmode-600/70 before:dark:border-darkmode-500/60",children:[e.jsx(j,{name:"email",type:"text",className:"block px-4 py-3",placeholder:"Email",value:l,onChange:a=>v(a.target.value)}),e.jsx(j,{name:"password",type:"password",className:"block px-4 py-3 mt-4",placeholder:"Password",value:n,onChange:a=>N(a.target.value)}),e.jsxs("div",{className:"flex mt-4 text-xs text-slate-500 sm:text-sm",children:[e.jsxs("div",{className:"flex items-center mr-auto",children:[e.jsx(S.Input,{id:"remember-me",type:"checkbox",className:"mr-2 border"}),e.jsx("label",{className:"cursor-pointer select-none",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("a",{href:"",children:"Forgot Password?"})]}),e.jsx("div",{className:"mt-5 text-center xl:mt-8 xl:text-left",children:e.jsx(P,{variant:"primary",className:"w-full xl:mr-3",onClick:()=>{k()},children:"Login"})})]})]})})})})}export{D as default};
