import{b as U,u as w,r as c,A as k,l as B,j as t,F as O,B as T,d as M,T as K}from"./app-f8751d23.js";import{b as Y,a as q,e as G,A as u,m as H,t as J,v as Q,w as S,x as a,y as V,z as i,F as W}from"./Tracker-361e94fb.js";import{n as X}from"./numberFormatter-373bc269.js";import{P as Z}from"./index-5b2e8740.js";import"./Transition-3d8a7619.js";import"./default-config-939e3be8.js";function ls({data_src_url:F,status:r,agent_id:v,subTitle:E,...D}){var _;const y=U(),g=w(s=>s.auth.token),{updateAppContextState:j}=c.useContext(k),[o,z]=c.useState(1),[d,p]=c.useState(1),[A,$]=c.useState(1),[m,b]=c.useState(""),[C,I]=c.useState(""),[l,L]=c.useState({}),P=F||`${T}/agent/farmers/status`,x=(s=P)=>{j("loading",!0),console.log(s),M.post(s,{status:r,agent_id:v},{headers:{API_KEY:K,Authorization:`Bearer ${g}`}}).then(n=>{var h;let e=(h=n==null?void 0:n.data)==null?void 0:h.data;console.log("Profiles",e),n!=null&&n.data&&(z(parseInt(e==null?void 0:e.current_page)),b(e==null?void 0:e.prev_page_url),I(e==null?void 0:e.next_page_url),$(e==null?void 0:e.last_page),L(e))}).catch(n=>{console.log(n)}).finally(()=>{j("loading",!1)})},R=B.debounce(x,1e3);return c.useEffect(()=>{x()},[g]),c.useEffect(()=>{d!=o&&p(o)},[o]),c.useEffect(()=>{d!=o&&R(`${P}?page=${d}`)},[d]),t.jsx("div",{className:"w-full h-full",children:t.jsxs(Y,{className:"bg-white h-full w-full",children:[t.jsxs(q,{justifyContent:"start",className:"space-x-2",children:[t.jsx(G,{children:"Farmers"}),t.jsx(u,{color:"gray",children:X(parseInt((l==null?void 0:l.total)||0))})]}),t.jsx(H,{className:"mt-2",children:E}),t.jsxs(J,{className:"mt-6",children:[t.jsx(Q,{children:t.jsxs(S,{children:[t.jsx(a,{children:"Farmer ID"}),t.jsx(a,{children:"Name"}),t.jsx(a,{children:"Phone"}),t.jsx(a,{children:"FPO"}),t.jsx(a,{className:"",children:"District"}),t.jsx(a,{className:"",children:"Registered On"}),t.jsx(a,{className:"",children:"Status"}),t.jsx(a,{children:"Link"})]})}),t.jsx(V,{children:(_=l==null?void 0:l.data)==null?void 0:_.map(s=>{var n,e,h,N;return t.jsxs(S,{children:[t.jsx(i,{children:s.farmer_id}),t.jsx(i,{children:s.first_name+" "+s.last_name}),t.jsx(i,{children:s.phone_number}),t.jsx(i,{children:s.fpo_name||((n=s==null?void 0:s.fpo)==null?void 0:n.fpo_name)||((h=(e=s==null?void 0:s.agent)==null?void 0:e.fpo)==null?void 0:h.fpo_name)}),t.jsx(i,{className:"",children:s.district}),t.jsx(i,{children:(N=new Date(s==null?void 0:s.created_at))==null?void 0:N.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx(i,{children:s.status==="complete"?t.jsx(u,{className:"capitalize",size:"md",color:"green",children:s==null?void 0:s.status}):(s==null?void 0:s.status)==="pending"?t.jsx(u,{className:"capitalize",size:"md",color:"gray",children:s==null?void 0:s.status}):t.jsx(u,{className:"capitalize",size:"md",color:"red",children:s==null?void 0:s.status})}),t.jsx(i,{children:t.jsx(W,{size:"xs",variant:"secondary",color:"orange",onClick:()=>{y(`${O}/${s==null?void 0:s.farmer_id}`)},children:"See details"})})]},s.id)})})]}),t.jsx(Z,{currentPage:o,moveToPage:d,fetchPage:x,setMoveToPage:p,nextPageUrl:C,prevPageUrl:m,lastPage:A,totalPages:l==null?void 0:l.last_page})]})})}export{ls as default};
